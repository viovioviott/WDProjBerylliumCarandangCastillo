<!DOCTYPE html>
<head>
    <meta charset="UTF-8   ">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="stylesheet.css">
    <link rel="stylesheet" href="signup.css">

    <title>Polaris</title>
    <link rel="icon" type="image/ico" href="images/favicon.ico?v=2">

    <style>
        label {
        font-family: starborn;
        color: white;
        font-size: 30px;
        }

        input {
        width: 35%;
        height: 20px;
        padding: 10px 10px; /* adds space inside for text */
        display: flex;
    
        background-color: #514da4;
        border: 2px, #ffffff;
        font-family: vanilla;

        color: white;
        font-size: 20px;
        }

        .toCenter {
        display: flex; /* puts everything in one line */
        flex-direction: column;
        text-align: left;
        }

        .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 130px;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        padding: 12px 16px;
        }
        select {
        width: 25%;
        font-size: 2em;
        padding: 16px 20px;
        border: none;
        border-radius: 4px;
        background-color: #f1f1f1;
        }
        button {
  background-color: rgb(45, 0, 247);
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 2em;
  cursor: pointer;
}
p{

}
    </style>
</head>

<body>
    <header>
        <section class="intro">
            <div>
                <img id="icon" src="images/polarislogo.png" alt="Polaris Logo"> 
            </div>
        <a style="font-size: 40px;" style="font-family: starborn"; href="index.html">POLARIS</a>
        <p style="font-size: 20px;">A Guide to the Stars</p>
        </section>
        
        <nav>
            <div class="nav">
            <a class="top" href="index.html">Home</a>
            <a class="top" href="polaris.html">Polaris</a>
            <a class="top" href="howto.html">How to Use</a>
            <a class="top" href="space.html">Guide on Space</a>
            <a class="top" href="authorinfo.html">About Us</a>
            <a class="top" href="signup.html">Sign Up</a>
            </div>  
        </nav>
    
    </header>
        
    <hr>
    <br>

    <form action="input page name" id="toCenter">
    <fieldset>
        <label for="location" id="title">Location: </label> 
        <select id="location" name="location">
                <option value="Manila">Manila</option>
                <option value="New York">New York</option>
                <option value="London">London</option>
                <option value="Tokyo">Tokyo</option>
        </select>
        <br> <br>
        <label for="lunarsolar" id="title">Lunar/Solar Eclipse: </label> 
        <select id="lunarsolar" name="lunarsolar">
                <option value="Lunar">Next Lunar Eclipse</option>
                <option value="Solar">Next Solar Eclipse</option>
        </select>
        <br> <br>
    
    <button type="button" id="generate"> Generate </button>
    <button type="button" id="save"> Save </button>
    <button type="reset" id="reset"> Reset </button>
    </fieldset>
    </form>
    <p style="font-size:30px" id="dateelement">Date: </p>
    <p style="font-size:30px" id="locationtext">Location: </p>


    <hr>
    <footer>
        <div class="content">
            <p>2025-2026</p>
            <p>b2029 Beryllium</p>
            <p>CARANDANG</p>
            <p>CASTILLO</p>
            <a src="https://docs.google.com/document/d/1y0HDwMChhhde23UVxOnTq2EY30sKsKeAYRubpdIylVM/edit?usp=sharing">CITATIONS</a>
        </div>

        <section class="outro">
        <img id="iconend" src="images/polarislogo.png" alt="Polaris Logo"> 
        <h4 style="font-size: 30px;">Polaris</h3>
        <p style="font-size: 15px;">A Guide to the Stars</p>
        </section>
    </footer>

    <script>
        function loadNotes() { // this is to load the data
        const KEY = "notes";
        const raw = localStorage.getItem(KEY); 

        function saveNotes(entries) {
        localStorage.setItem(KEY, JSON.stringify(entries));
        }       

        if (raw) {
        return JSON.parse(raw); // if there is saved data on the key "notes", parse and return it
        } else {
        return []; // if none, return a blank array
        }
        }


        let datedata = "";

        document.getElementById('generate').onclick = function(event) { // generate the data
        const location= document.getElementById('location').value.trim();
        const lunarsolar = document.getElementById('lunarsolar').value.trim();

        const dateelement = document.getElementById('dateelement');
        dateelement.innerHTML = "Date: ";
        const locationelement = document.getElementById('locationtext');
        locationelement.innerHTML = "Location: "; 

        let dateoutput = ""; // dateoutput will be put to dateelement so that it can appear
        //after clicking generate, but then it also goes to date data so that it can also be
        //saved by the SAVE function
        
        if (location == "Manila"){
            if (lunarsolar == "Lunar"){
                dateoutput = "2026-03-03";
            }
            else{
                dateoutput = "2042-04-20";
            }
        }
        if (location == "New York"){
            if (lunarsolar == "Lunar"){
                dateoutput = "2026-03-03";
            }
            else{
                dateoutput = "2079-05-01";
            }
        }
        if (location == "London"){
            if (lunarsolar == "Lunar"){
                dateoutput = "2028-12-31";
            }
            else{
                dateoutput = "2090-09-23";
            }
        }
        if (location == "Tokyo"){
            if (lunarsolar == "Lunar"){
                dateoutput = "2026-03-03";
            }
            else{
                dateoutput = "2035-09-02";
            }
        }

        //change the actual text content

        //const dateelement = document.getElementById('date');
        dateelement.innerHTML += dateoutput;
        //const locationelement = document.getElementById('locationtext');
        locationelement.innerHTML += location; 
        datedata = dateoutput; // so that save would be able to get the data 
        
        }
        document.getElementById('reset').onclick = function(event) {
        const dateelement = document.getElementById('dateelement');
        dateelement.innerHTML = "Date: "; 
        const locationelement = document.getElementById('locationtext');
        locationelement.innerHTML = "Location: "; 
        }
        document.getElementById('save').onclick = function(event) {

        if (loadNotes()[loadNotes().length-1]){
        const lunarsolar = document.getElementById('lunarsolar').value.trim();
        const date = dateoutput;
        const datecreatedelement = new Date().toLocaleTimeString();
        const location = document.getElementById('location').value.trim();
        
        let notes = loadNotes()[loadNotes().length-1].date;
        let package = {
            user: loadNotes()[loadNotes().length-1].user,
            password: loadNotes()[loadNotes().length-1].password,
            data: notes.push([srss, date, datecreatedelement, location])
        };
        let finalpackage = loadNotes().push(package);
        saveNotes(finalpackage);

        const dateelement = document.getElementById('dateelement');
        dateelement.innerHTML = "Date: ";
        const locationelement = document.getElementById('locationtext');
        locationelement.innerHTML = "Location: "; 
        }
        else {
            alert("You are not logged in. Please log in to save or schedule events.")
        }
        
        }

    </script>

    <script src="signup.js"></script>
</body>